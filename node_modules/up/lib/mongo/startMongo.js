
var path = System.require('path');
var spawn = System.require('child_process').spawn;

export default (mongoConfig) => {
    return (callback) => {
        if (!mongoConfig.spawn) {
            callback(false);
            return;
        }

        var mongo = spawn(mongoConfig.path, ['--dbpath', path.normalize(System.locate({name: 'up/dummy'}) + '/../../data' )]);

        mongo.stdout.on('data', (data) => {
          console.log('LOG MONGO  : ' + data);
        });

        mongo.stderr.on('data', (data) => {
          console.log('ERR MONGO  : ' + data);
        });
        
        callback(true);
    }
}
